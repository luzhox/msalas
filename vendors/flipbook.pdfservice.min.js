/* v 3.6.8
author http://codecanyon.net/user/creativeinteractivemedia/portfolio?ref=creativeinteractivemedia
*/

var FLIPBOOK=FLIPBOOK||{};FLIPBOOK.PdfService=function(d,e,v){var l=this;this.pdfDocument=d,this.pdfInfo=d._pdfInfo,this.numPages=this.pdfInfo.numPages,this.webgl="webgl"==v.viewMode,this.options=v,this.main=v.main,this.pages=[],this.thumbs=[],this.canvasBuffer=[],this.viewports=[],this.textContents=[],this.pdfPages=[],this.pdfPagesRendering=[],this.pdfPagesRendered=[],this.bookPagesRendered=[],this.pdfAnnotations=[],this.eventBus=new EventBus;for(var t=v.isMobile?40:200,n=0;n<t;n++){var i=document.createElement("canvas");i.width=10,i.height=10,i._name=n,i.available=!0,i.pageIndex=-100,i.pdfPageIndex=-1,this.canvasBuffer.push(i)}this._events={},this.on=function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},this.off=function(e,t){if(this._events[e]){var n=this._events[e].indexOf(t);-1<n&&this._events[e].splice(n,1)}},this.trigger=function(e){if(this._events[e]){var t=0,n=this._events[e].length;if(n)for(;t<n;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},this.getCanvas=function(){var e,t;for(e=0;e<this.canvasBuffer.length;e++)if((t=this.canvasBuffer[e]).available){t.available=!1,t.double=!1;break}return this.canvasBuffer.splice(e,1),this.canvasBuffer.push(t),t},this.setRightIndex=function(t){var n=this,i=[],a=this.options.isMobile?4:20;this.canvasBuffer.forEach(function(e){e.available=t-e.pageIndex>3+a||t-e.pageIndex<-2-a,e.available&&-1<e.pageIndex&&(n.pdfPagesRendered[e.pdfPageIndex][e.size]=!1,delete n.pages[e.pdfPageIndex].canvas[e.size],n.pages[e.pdfPageIndex].rendering=!1,n.pages[e.pdfPageIndex].cleanup(),i.push({index:e.pageIndex,size:e.size}),e.double&&i.push({index:e.pageIndex-1,size:e.size}),e.pageIndex=-100,e.getContext("2d").clearRect(0,0,e.width,e.height))}),0<i.length&&this.trigger("pageUnloaded",{unloadedPages:i})},window.s=function(){var s=document.createElement("div");document.body.appendChild(s),l.canvasBuffer.forEach(function(e){var t=document.createElement("span");t.style.margin="2px",t.style.background="#ccc",t.style.display="inline-block",s.appendChild(t);var n=e.toDataURL(),i=new Image;i.src=n,i.style.border=e.available?"1px solid #0F0":"1px solid #F00",t.appendChild(i),i.height=100;var a=document.createElement("span");a.style.display="block",t.appendChild(a),a.innerText=e.pageIndex+";"+e.pdfPageIndex+";"+e.size})},this.loadThumbs=function(t,n){var i=this;this.thumbLoading=this.thumbLoading||0,this.thumbLoading>=this.pdfInfo.numPages?n.call(i):this.loadThumb(this.thumbLoading,function(e){i.options.thumbLoaded(e),i.thumbLoading++,i.loadThumbs(t,n)})},this.loadThumb=function(r,o){var d=this;this.getViewport(r,function(){var e=d.pages[r],t=100/e.getViewport(1).height,n=e.getViewport(t),i=document.createElement("canvas");i.index=r;var a=i.getContext("2d");i.height=n.height,i.width=n.width;var s={canvasContext:a,viewport:n};e.cleanupAfterRender=!0,e.render(s).then(function(){e.cleanup(),o&&o.call(d,i)})})},this.getBookPage=function(e,t){},this.init=function(e,t){e?this.pdfDocument.getOutline().then(function(e){l.outline=e,l.init()}):l.getViewport(0,function(e){l.r1=e.width/e.height,1==l.pdfInfo.numPages?(l.double=!1,l.trigger("init")):l.getViewport(1,function(e){l.r2=e.width/e.height,l.double=1.5<l.r2/l.r1,l.backCover=t||!0,l.trigger("init")})})},this.startLoadingText=function(){this.loadingText=!0},this.stopLoadingText=function(){this.loadingText=!1},this.getViewport=function(e,t){e>=l.pdfInfo.numPages||(l.pages[e]?(l.viewports[e]=l.pages[e].getViewport(1),t.call(l,l.viewports[e])):d.getPage(e+1).then(function(e){l.pages[e.pageIndex]=e,l.getViewport(e.pageIndex,t)}))},this.getAllViewports=function(e){},this.getText=function(n,i){var a=this;this.getViewport(n,function(e){var t=a.pages[n];a.getTextContent(t,function(){i.call(a,t)})})},this.getTextAllPages=function(e){var t=this;this.loadingTextFromPage=this.loadingTextFromPage||0,this.getText(this.loadingTextFromPage,function(){t.loadingTextFromPage==t.numPages-1?e&&e.call(t):(t.loadingTextFromPage++,t.getTextAllPages(e))})},this.findInPage=function(e,t,n){var i=this;this.findInPageCallbacks=this.findInPageCallbacks||[],this.findInPageCallbacks[t]=n,this.searchingString=e,this.pages[t]&&this.pages[t].textContent?i.findInPageTextContentAvailable(this.pages[t],t):this.getText(t,function(e){i.findInPageTextContentAvailable(e,t)})},this.findInPageTextContentAvailable=function(e,t){for(var n=e.textContent.items,i=0,a=0;a<n.length;a++){var s=n[a].str;s.includes(this.searchingString)&&i++,s.toUpperCase().includes(this.searchingString.toUpperCase())&&i++}var r=this.findInPageCallbacks[t];r&&r.call(this,i,e.htmlContent),this.findInPageCallbacks[t]=null},this.getThumb=function(r,o,d){this.getViewport(r,function(e){var t=l.pages[r];if(t.thumb)d.call(l,t.thumb);else{var n=o/l.viewports[r].height,i=(e=t.getViewport(n),document.createElement("canvas")),a=(t.thumb=i).getContext("2d");i.height=e.height,i.width=e.width;var s={canvasContext:a,viewport:e};t.cleanupAfterRender=!0,t.render(s).then(function(){t.cleanup(),d.call(l,t.thumb)})}})},this.getPage=function(e,t){var n=this;(n.double?Math.round(e/2)+1:e+1)>this.pdfInfo.numPages||d.getPage(e).then(function(e){n.renderPage(e,t)})},this.renderPage=function(o,d,l){var h=this;o.canvas=o.canvas||{},o.canvas[d]?l.call(h,o):(o.rendering&&setTimeout(function(){h.renderPage(o,d,l)},300),o.rendering=!0,this.getTextContent(o,function(){var e=o.getViewport(1),t=e.width<=e.height,n=t||!h.webgl?d/e.height:d/e.width,i=o.getViewport(n),a=h.getCanvas();a.width=i.width,a.height=i.height,a.rendering=!0,h.webgl&&(t?(a.height=d,a.width=i.width>d?i.width:d,a.scaleX=i.width/d,a.scaleY=1):(a.width=d,a.height=i.height>d?i.height:d,a.scaleY=i.height/d,a.scaleX=1));var s=a.getContext("2d");s.fillStyle="#FFFFFF",s.fillStyle="#000000";var r={canvasContext:s,viewport:i};o.scale=n,o.canvas[d]=a,o.canvas[d].ratio=i.width/i.height,o.cleanupAfterRender=!0,o.render(r).promise.then(function(){r=null,l&&l.call(h,o)})}))},this.renderPageFromPdf=function(t,n,i){var a=this;if(t>=this.pdfInfo.numPages&&i.call(a),this.pages[t]){var s=t,e=this.pages[t],r=e.getViewport(1);Math.max(r.width,r.height),r.height;a.pdfPagesRendering[s]&&a.pdfPagesRendering[s][n]?setTimeout(function(){a.renderPageFromPdf(t,n,i)},100):a.pdfPagesRendered[s]&&a.pdfPagesRendered[s][n]?a.onPdfPageRendered(a.pages[s],n,i):(a.pdfPagesRendered[s]=a.pdfPagesRendered[s]||{},a.pdfPagesRendering[s]=a.pdfPagesRendering[s]||{},a.pdfPagesRendering[s][n]=!0,this.renderPage(e,n,function(e){a.pdfPagesRendering[s][n]=!1,a.pdfPagesRendered[s][n]=!0,a.onPdfPageRendered(e,n,i)}))}else this.getViewport(t,function(e){a.renderPageFromPdf(t,n,i)})},this.onBookPageRendered=function(e,t,n,i){this.bookPagesRendered.push({index:n,pdfPageIndex:e.pageIndex,size:i}),this.trigger("pageLoaded",{index:n,size:i,canvas:t})},this.onPdfPageRendered=function(e,t,n){var i=this;if(e.canvas&&e.canvas[t]){var a=e.canvas[t],s=e.htmlContent,r=e.pageIndex;if(a.pdfPageIndex=r,a.rendering=!1,void 0!==a){if("doubleWithCover"==v.pageMode)if(0==r)f(s,r),a.pageIndex=0,a.size=t,i.onBookPageRendered(e,a,0,t);else if(r==v.pages.length/2)f(s,v.numPages-1),a.pageIndex=v.numPages-1,a.size=t,i.onBookPageRendered(e,a,v.numPages-1,t);else if(s.style.transformOrigin="0 0",i.webgl){a.double=!0,a.scaleX=a.width/2/t,a.scaleY=a.scaleY;var o=s.cloneNode(!0);f(s,2*r-1),f(o,2*r),i.onBookPageRendered(e,a,2*r,t),i.onBookPageRendered(e,a,2*r-1,t),a.pageIndex=2*r,a.size=t}else{var d=i.getCanvas(),l=d.getContext("2d");d.rendering=!0,d.width=a.width/2,d.height=a.height,l.fillStyle="#FFFFFF",l.drawImage(a,a.width/2,0,a.width/2,a.height,0,0,a.width/2,a.height),d.rendering=!1;var h=i.options.rightToLeft?2*r-1:2*r;d.pageIndex=h,d.pdfPageIndex=r,d.size=t;var c=i.getCanvas(),u=c.getContext("2d");c.width=a.width/2,c.height=a.height,c.rendering=!0,u.fillStyle="#FFFFFF",u.drawImage(a,0,0),c.rendering=!1;var g=i.options.rightToLeft?2*r:2*r-1;c.pageIndex=g,c.pdfPageIndex=r,c.size=t;o=s.cloneNode(!0);f(s,2*r-1),f(o,2*r),i.onBookPageRendered(e,d,h,t),i.onBookPageRendered(e,c,g,t),a.available=!0,a.getContext("2d").clearRect(0,0,a.width,a.height),a.pageIndex=-100,a.size=t}else f(s,r),a.pageIndex=r,a.size=t,i.onBookPageRendered(e,a,r,t);n&&n.call(i,{canvas:a,size:t,pdfPageIndex:r})}}function f(e,t){var n=v.pages[t];n.htmlContentInitialized||(n.htmlContent&&jQuery(e).append(jQuery(n.htmlContent)),n.htmlContentInitialized=!0,n.htmlContent=e)}},this.getTextContent=function(r,o){r.htmlContent?o(r):r.getTextContent().then(function(e){r.textContent=e;var t=document.createElement("div");t.classList.add("flipbook-page-htmlContent");if(l.options.textLayer){var n=document.createElement("div");n.className="flipbook-textLayer";var i=1e3/r.getViewport(1).height;n.style.width=String(1e3*r.getViewport(1).width/r.getViewport(1).height)+"px",n.style.height="1000px";var a=new TextLayerBuilder({eventBus:l.eventBus,textLayerDiv:n,pageIndex:r.pageIndex,viewport:r.getViewport(i)});a.setTextContent(e),a.render(TEXT_LAYER_RENDER_DELAY),t.appendChild(n)}var s=new PDFLinkService({eventBus:l.eventBus});s.setViewer(l.main),s.setDocument(d),new AnnotationLayerBuilder({pageDiv:t,pdfPage:r,linkService:s}).render(r.getViewport(1e3/r.getViewport(1).height),"display"),r.htmlContent=t,o(r)})},this.getCanvasByHeight=function(e,t,n){}},FLIPBOOK.PdfService.prototype={};var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var EventBus=function(){function n(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).dispatchToDOM,t=void 0!==e&&e;_classCallCheck(this,n),this._listeners=Object.create(null),this._dispatchToDOM=!0===t}return _createClass(n,[{key:"on",value:function(e,t){var n=this._listeners[e];n||(n=[],this._listeners[e]=n),n.push(t)}},{key:"off",value:function(e,t){var n=this._listeners[e],i=void 0;!n||(i=n.indexOf(t))<0||n.splice(i,1)}},{key:"dispatch",value:function(e){var t=this._listeners[e];if(t&&0!==t.length){var n=Array.prototype.slice.call(arguments,1);t.slice(0).forEach(function(e){e.apply(null,n)}),this._dispatchToDOM&&this._dispatchDOMEvent(e,n)}else if(this._dispatchToDOM){var i=Array.prototype.slice.call(arguments,1);this._dispatchDOMEvent(e,i)}}},{key:"_dispatchDOMEvent",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this._dispatchToDOM){var n=Object.create(null);if(t&&0<t.length){var i=t[0];for(var a in i){var s=i[a];if("source"!==a)n[a]=s;else if(s===window||s===document)return}}var r=document.createEvent("CustomEvent");r.initCustomEvent(e,!0,!0,n),document.dispatchEvent(r)}}}]),n}(),EXPAND_DIVS_TIMEOUT=300,MATCH_SCROLL_OFFSET_TOP=-50,MATCH_SCROLL_OFFSET_LEFT=-400,TextLayerBuilder=function(){function l(e){var t=e.textLayerDiv,n=e.eventBus,i=e.pageIndex,a=e.viewport,s=e.findController,r=void 0===s?null:s,o=e.enhanceTextSelection,d=void 0!==o&&o;_classCallCheck(this,l),this.textLayerDiv=t,this.eventBus=n||(0,_dom_events.getGlobalEventBus)(),this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=i,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=a,this.textDivs=[],this.findController=r,this.textLayerRenderTask=null,this.enhanceTextSelection=d,this._boundEvents=Object.create(null),this._bindEvents(),this._bindMouse()}return _createClass(l,[{key:"_finishRendering",value:function(){if(this.renderingDone=!0,!this.enhanceTextSelection){var e=document.createElement("div");e.className="endOfContent",this.textLayerDiv.appendChild(e)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel(),this.textDivs=[];var n=document.createDocumentFragment();this.textLayerRenderTask=(0,pdfjsLib.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:n,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(function(){e.textLayerDiv.appendChild(n),e._finishRendering(),e.updateMatches()},function(e){})}}},{key:"cancel",value:function(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null)}},{key:"setTextContentStream",value:function(e){this.cancel(),this.textContentStream=e}},{key:"setTextContent",value:function(e){this.cancel(),this.textContent=e}},{key:"convertMatches",value:function(e,t){var n=0,i=0,a=this.textContentItemsStr,s=a.length-1,r=null===this.findController?0:this.findController.state.query.length,o=[];if(!e)return o;for(var d=0,l=e.length;d<l;d++){for(var h=e[d];n!==s&&h>=i+a[n].length;)i+=a[n].length,n++;n===a.length&&console.error("Could not find a matching mapping");var c={begin:{divIdx:n,offset:h-i}};for(h+=t?t[d]:r;n!==s&&h>i+a[n].length;)i+=a[n].length,n++;c.end={divIdx:n,offset:h-i},o.push(c)}return o}},{key:"renderMatches",value:function(e){if(0!==e.length){var d=this.textContentItemsStr,l=this.textDivs,t=null,n=this.pageIdx,i=null!==this.findController&&n===this.findController.selected.pageIdx,a=null===this.findController?-1:this.findController.selected.matchIdx,s={divIdx:-1,offset:void 0},r=a,o=r+1;if(null!==this.findController&&this.findController.state.highlightAll)r=0,o=e.length;else if(!i)return;for(var h=r;h<o;h++){var c=e[h],u=c.begin,g=c.end,f=i&&h===a?" selected":"";if(this.findController&&this.findController.selected.matchIdx===h&&this.findController.selected.pageIdx===n){var v={top:MATCH_SCROLL_OFFSET_TOP,left:MATCH_SCROLL_OFFSET_LEFT};(0,_ui_utils.scrollIntoView)(l[u.divIdx],v,!0)}if(t&&u.divIdx===t.divIdx?y(t.divIdx,t.offset,u.offset):(null!==t&&y(t.divIdx,t.offset,s.offset),m(u)),u.divIdx===g.divIdx)y(u.divIdx,u.offset,g.offset,"highlight"+f);else{y(u.divIdx,u.offset,s.offset,"highlight begin"+f);for(var p=u.divIdx+1,x=g.divIdx;p<x;p++)l[p].className="highlight middle"+f;m(g,"highlight end"+f)}t=g}t&&y(t.divIdx,t.offset,s.offset)}function m(e,t){var n=e.divIdx;l[n].textContent="",y(n,0,e.offset,t)}function y(e,t,n,i){var a=l[e],s=d[e].substring(t,n),r=document.createTextNode(s);if(i){var o=document.createElement("span");return o.className=i,o.appendChild(r),void a.appendChild(o)}a.appendChild(r)}}},{key:"updateMatches",value:function(){if(this.renderingDone){for(var e=this.matches,t=this.textDivs,n=this.textContentItemsStr,i=-1,a=0,s=e.length;a<s;a++){for(var r=e[a],o=Math.max(i,r.begin.divIdx),d=r.end.divIdx;o<=d;o++){var l=t[o];l.textContent=n[o],l.className=""}i=r.end.divIdx+1}if(this.findController&&this.findController.highlightMatches){var h=void 0,c=void 0;null!==this.findController&&(h=this.findController.pageMatches[this.pageIdx]||null,c=this.findController.pageMatchesLength&&this.findController.pageMatchesLength[this.pageIdx]||null),this.matches=this.convertMatches(h,c),this.renderMatches(this.matches)}}}},{key:"_bindEvents",value:function(){var n=this,i=this.eventBus,a=this._boundEvents;a.pageCancelled=function(e){if(e.pageNumber===n.pageNumber)if(n.textLayerRenderTask)console.error("TextLayerBuilder._bindEvents: `this.cancel()` should have been called when the page was reset, or rendering cancelled.");else for(var t in a)i.off(t.toLowerCase(),a[t]),delete a[t]},a.updateTextLayerMatches=function(e){e.pageIndex!==n.pageIdx&&-1!==e.pageIndex||n.updateMatches()},i.on("pagecancelled",a.pageCancelled),i.on("updatetextlayermatches",a.updateTextLayerMatches)}},{key:"_bindMouse",value:function(){var s=this,r=this.textLayerDiv,o=null;r.addEventListener("mousedown",function(e){if(s.enhanceTextSelection&&s.textLayerRenderTask)return s.textLayerRenderTask.expandTextDivs(!0),void(o&&(clearTimeout(o),o=null));var t=r.querySelector(".endOfContent");if(t){var n=e.target!==r;if(n=n&&"none"!==window.getComputedStyle(t).getPropertyValue("-moz-user-select")){var i=r.getBoundingClientRect(),a=Math.max(0,(e.pageY-i.top)/i.height);t.style.top=(100*a).toFixed(2)+"%"}t.classList.add("active")}}),r.addEventListener("mouseup",function(){if(s.enhanceTextSelection&&s.textLayerRenderTask)o=setTimeout(function(){s.textLayerRenderTask&&s.textLayerRenderTask.expandTextDivs(!1),o=null},EXPAND_DIVS_TIMEOUT);else{var e=r.querySelector(".endOfContent");e&&(e.style.top="",e.classList.remove("active"))}})}}]),l}(),DefaultTextLayerFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createTextLayerBuilder",value:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return new TextLayerBuilder({textLayerDiv:e,pageIndex:t,viewport:n,enhanceTextSelection:i})}}]),e}(),PDFLinkService=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.eventBus,n=e.externalLinkTarget,i=void 0===n?null:n,a=e.externalLinkRel,s=void 0===a?null:a;_classCallCheck(this,r),this.eventBus=t||(0,_dom_events.getGlobalEventBus)(),this.externalLinkTarget=i,this.externalLinkRel=s,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return _createClass(r,[{key:"setDocument",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setHistory",value:function(e){this.pdfHistory=e}},{key:"navigateTo",value:function(r){var o=this;new Promise(function(t,e){"string"!=typeof r?t({namedDest:"",explicitDest:r}):o.pdfDocument.getDestination(r).then(function(e){t({namedDest:r,explicitDest:e})})}).then(function(e){Array.isArray(e.explicitDest)?function t(e){var n=e.namedDest,i=e.explicitDest,a=i[0],s=void 0;if(a instanceof Object){if(null===(s=o._cachedPageNumber(a)))return void o.pdfDocument.getPageIndex(a).then(function(e){o.cachePageRef(e+1,a),t({namedDest:n,explicitDest:i})}).catch(function(){console.error('PDFLinkService.navigateTo: "'+a+'" is not a valid page reference, for dest="'+r+'".')})}else{if(!Number.isInteger(a))return void console.error('PDFLinkService.navigateTo: "'+a+'" is not a valid destination reference, for dest="'+r+'".');s=a+1}!s||s<1||s>o.pagesCount?console.error('PDFLinkService.navigateTo: "'+s+'" is not a valid page number, for dest="'+r+'".'):(o.pdfHistory&&(o.pdfHistory.pushCurrentPosition(),o.pdfHistory.push({namedDest:n,explicitDest:i,pageNumber:s})),o.pdfViewer.scrollPageIntoView({pageNumber:s,destArray:i}))}(e):console.error('PDFLinkService.navigateTo: "'+e.explicitDest+'" is not a valid destination array, for dest="'+r+'".')})}},{key:"getDestinationHash",value:function(e){if("string"==typeof e)return this.getAnchorUrl("#"+escape(e));if(Array.isArray(e)){var t=JSON.stringify(e);return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function(e){return(this.baseUrl||"")+e}},{key:"setHash",value:function(e){var t=void 0,n=void 0;if(e.includes("=")){var i=(0,_ui_utils.parseQueryString)(e);if("search"in i&&this.eventBus.dispatch("findfromurlhash",{source:this,query:i.search.replace(/"/g,""),phraseSearch:"true"===i.phrase}),"nameddest"in i)return void this.navigateTo(i.nameddest);if("page"in i&&(t=0|i.page||1),"zoom"in i){var a=i.zoom.split(","),s=a[0],r=parseFloat(s);s.includes("Fit")?"Fit"===s||"FitB"===s?n=[null,{name:s}]:"FitH"===s||"FitBH"===s||"FitV"===s||"FitBV"===s?n=[null,{name:s},1<a.length?0|a[1]:null]:"FitR"===s?5!==a.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):n=[null,{name:s},0|a[1],0|a[2],0|a[3],0|a[4]]:console.error('PDFLinkService.setHash: "'+s+'" is not a valid zoom value.'):n=[null,{name:"XYZ"},1<a.length?0|a[1]:null,2<a.length?0|a[2]:null,r?r/100:s]}n?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:n,allowNegativeOffset:!0}):t&&(this.page=t),"pagemode"in i&&this.eventBus.dispatch("pagemode",{source:this,mode:i.pagemode})}else{n=unescape(e);try{n=JSON.parse(n),Array.isArray(n)||(n=n.toString())}catch(e){}if("string"==typeof n||isValidExplicitDestination(n))return void this.navigateTo(n);console.error('PDFLinkService.setHash: "'+unescape(e)+'" is not a valid destination.')}}},{key:"executeNamedAction",value:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":1<this.page&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}},{key:"cachePageRef",value:function(e,t){if(t){var n=t.num+" "+t.gen+" R";this._pagesRefCache[n]=e}}},{key:"_cachedPageNumber",value:function(e){var t=e.num+" "+e.gen+" R";return this._pagesRefCache&&this._pagesRefCache[t]||null}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return this.pdfViewer.pagesRotation},set:function(e){this.pdfViewer.pagesRotation=e}}]),r}();function isValidExplicitDestination(e){if(!Array.isArray(e))return!1;var t=e.length,n=!0;if(t<2)return!1;var i=e[0];if(!("object"===(void 0===i?"undefined":_typeof(i))&&Number.isInteger(i.num)&&Number.isInteger(i.gen)||Number.isInteger(i)&&0<=i))return!1;var a=e[1];if("object"!==(void 0===a?"undefined":_typeof(a))||"string"!=typeof a.name)return!1;switch(a.name){case"XYZ":if(5!==t)return!1;break;case"Fit":case"FitB":return 2===t;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==t)return!1;break;case"FitR":if(6!==t)return!1;n=!1;break;default:return!1}for(var s=2;s<t;s++){var r=e[s];if(!("number"==typeof r||n&&null===r))return!1}return!0}var SimpleLinkService=function(){function e(){_classCallCheck(this,e),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(e,[{key:"navigateTo",value:function(e){}},{key:"getDestinationHash",value:function(e){return"#"}},{key:"getAnchorUrl",value:function(e){return"#"}},{key:"setHash",value:function(e){}},{key:"executeNamedAction",value:function(e){}},{key:"cachePageRef",value:function(e,t){}},{key:"pagesCount",get:function(){return 0}},{key:"page",get:function(){return 0},set:function(e){}},{key:"rotation",get:function(){return 0},set:function(e){}}]),e}(),AnnotationLayerBuilder=function(){function l(e){var t=e.pageDiv,n=e.pdfPage,i=e.linkService,a=e.downloadManager,s=e.imageResourcesPath,r=void 0===s?"":s,o=e.renderInteractiveForms,d=void 0!==o&&o;_classCallCheck(this,l),this.pageDiv=t,this.pdfPage=n,this.linkService=i,this.downloadManager=a,this.imageResourcesPath=r,this.renderInteractiveForms=d,this.div=null,this._cancelled=!1}return _createClass(l,[{key:"render",value:function(n){var i=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"display";this.pdfPage.getAnnotations({intent:e}).then(function(e){if(!i._cancelled){var t={viewport:n.clone({dontFlip:!0}),div:i.div,annotations:e,page:i.pdfPage,imageResourcesPath:i.imageResourcesPath,renderInteractiveForms:i.renderInteractiveForms,linkService:i.linkService,downloadManager:i.downloadManager};if(i.div)pdfjsLib.AnnotationLayer.update(t);else{if(0===e.length)return;i.div=document.createElement("div"),i.div.className="annotationLayer",i.pageDiv.appendChild(i.div),t.div=i.div,pdfjsLib.AnnotationLayer.render(t)}}})}},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&this.div.setAttribute("hidden","true")}}]),l}(),DefaultAnnotationLayerFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createAnnotationLayerBuilder",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return new AnnotationLayerBuilder({pageDiv:e,pdfPage:t,imageResourcesPath:n,renderInteractiveForms:i,linkService:new SimpleLinkService})}}]),e}(),TEXT_LAYER_RENDER_DELAY=200,MAX_TEXT_DIVS_TO_RENDER=1e5,NonWhitespaceRegexp=/\S/;